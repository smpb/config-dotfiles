# reload tmux.conf with prefix-r
bind r source-file ~/.tmux.conf \; display "Reloaded config file"

set -g default-terminal "screen-256color"
set -g focus-events     on  # focus events are requested and passed to applications

#
# STATUS BAR
#

# Variable           Description
# --------           -----------
# #H                 Hostname of local host
# #h                 Hostname of local host without the domain name
# #F                 Current window flag
# #I                 Current window index
# #P                 Current pane index
# #S                 Current session name
# #T                 Current window title
# #W                 Current window name
# ##                 A literal #

# Color                 Hex Value
# -----                 ---------
# onedark_black         #282c34
# onedark_blue          #61afef
# onedark_yellow        #e5c07b
# onedark_red           #e06c75
# onedark_white         #aab2bf
# onedark_green         #98c379
# onedark_visual_grey   #3e4452
# onedark_comment_grey  #5c6370

status_cpu="#(cut -d ' ' -f 1-3 /proc/loadavg)"
if-shell '[[ $(uname -s) = Darwin ]]' {
  status_cpu="#(uptime | cut -d ',' -f 4- | cut -d ':' -f 2 | awk '{$1=$1};1')"
}

set-option -gq status "on"
set-option -gq status-justify "left"

set-option -gq status-left-length  "100"
set-option -gq status-right-length "100"
set-option -gq status-right-attr   "none"

set-option -gq message-fg "#aab2bf"
set-option -gq message-bg "#3c3d49"

set-option -gq message-command-fg "#aab2bf"
set-option -gq message-command-bg "#3c3d49"

set-option -gq status-attr        "none"
set-option -gq status-left-attr   "none"

set-window-option -gq window-status-fg   "#3c3d49"
set-window-option -gq window-status-bg   "#3c3d49"
set-window-option -gq window-status-attr "none"

set-window-option -gq window-status-activity-bg   "#3c3d49"
set-window-option -gq window-status-activity-fg   "#3c3d49"
set-window-option -gq window-status-activity-attr "none"

set-window-option -gq window-status-separator ""

set-option -gq window-style        "fg=#5c6370"
set-option -gq window-active-style "fg=#aab2bf"

set-option -gq pane-border-fg        "#aab2bf"
set-option -gq pane-border-bg        "#3c3d49"
set-option -gq pane-active-border-fg "#98c379"
set-option -gq pane-active-border-bg "#3c3d49"

set-option -gq display-panes-active-colour "#e5c07b"
set-option -gq display-panes-colour        "#61afef"

set-option -gq status-bg "#3c3d49"
set-option -gq status-fg "#aab2bf"

#set-option -gq @prefix_highlight_fg               "#3c3d49"
#set-option -gq @prefix_highlight_bg               "#98c379"
#set-option -gq @prefix_highlight_copy_mode_attr   "fg=#3c3d49,bg=#98c379"
#set-option -gq @prefix_highlight_output_prefix    "  "

set-option -gq status-left   "#[fg=#3c3d49,bg=#98c379,bold] #S #[fg=#98c379,bg=#3c3d49,nobold,nounderscore,noitalics]"
set-option -gq status-right  "#[fg=#aab2bf,bg=#3c3d49]#[fg=#aab2bf, bg=#3c3d49] ${status_cpu} #[fg=#98c379,bg=#3c3d49,nobold,nounderscore,noitalics]#[fg=#282c34,bg=#98c379,nobold] %d/%m/%Y %H:%M #[fg=#e5c07b, bg=#98c379]#[fg=#e06c75,bg=#e5c07b]"

set-option -gq window-status-format         "#[fg=#aab2bf,bg=#3c3d49] #I #W #[fg=#3e4452,bg=#3c3d49,nobold,nounderscore,noitalics] "
set-option -gq window-status-current-format "#[fg=#98c379,bg=#3c3d49,nobold] #I #W #[fg=#98c379,bg=#3c3d49,bold,nounderscore,noitalics]"

#
# WINDOWING
#

# start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

# bind | and - to horizontal and vertical split respectively, and keep CWD
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# faster window switching ('-r' allows the key to be repeatedly pressed)
bind-key -r Tab   next-window
bind-key -r BTab  previous-window

# provide visual notification in status bar when a window's content changes
setw -g monitor-activity on
set  -g visual-activity  on

#
# MOUSE MODE
#

setw -g mouse on
